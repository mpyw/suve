# nfpm configuration for generating .deb and .rpm packages
# https://nfpm.goreleaser.com/configuration/

name: suve
arch: "${GOARCH}"
platform: linux
version: "${VERSION}"
release: "1"
maintainer: "mpyw <mpyw628@gmail.com>"
description: |
  Git-like CLI/GUI for AWS Parameter Store and Secrets Manager
  .
  Provides familiar commands like show, log, diff, and a staging workflow
  for safe, reviewable changes to your AWS secrets and parameters.
homepage: "https://github.com/mpyw/suve"
license: "MIT"

# RPM uses first line of description as Summary (without trailing dot)
vendor: "mpyw"
section: "utils"
priority: "optional"

# RPM-specific
rpm:
  group: "Applications/System"

# No hard dependencies - CLI works without GUI libs
# GUI dependencies are recommended but not required
depends: []

# DEB: recommended packages for GUI support
recommends:
  - libgtk-3-0
  - libayatana-appindicator3-1

# RPM overrides
# Note: RPM only recommends gtk3 because appindicator package names
# vary across distros (libappindicator-gtk3, ayatana-appindicator, etc.)
overrides:
  rpm:
    recommends:
      - gtk3

contents:
  - src: ./suve
    dst: /usr/bin/suve
    file_info:
      mode: 0755

  # Copyright file (required by Debian policy)
  - src: ./LICENSE
    dst: /usr/share/doc/suve/copyright
    file_info:
      mode: 0644
